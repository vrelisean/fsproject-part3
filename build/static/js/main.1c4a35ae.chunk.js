(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(13),u=t.n(c),o=t(2),l=t(3),i=t.n(l),m="/api/contacts",f=function(){return i.a.get(m).then((function(e){return e.data}))},s=function(e){return i.a.post(m,e).then((function(e){return e.data}))},d=function(e){return i.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},b=function(e,n){return i.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){var n=e.value,t=e.eventHandler;return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:n,onChange:t}))},h=function(e){return r.a.createElement("form",{onSubmit:e.submitEvent},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:e.nameValue,onChange:e.nameEvent})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:e.numberValue,onChange:e.numberEvent})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},E=function(e){var n=e.personsToShow,t=e.deletePerson;return r.a.createElement(r.a.Fragment,null,n.map((function(e){return r.a.createElement("div",{key:e.name},e.name," ",e.number,r.a.createElement("button",{onClick:function(){if(window.confirm("Delete ".concat(e.name,"?")))return t(e)}},"delete"))})))},p=function(e){var n=e.notification;return null===n.message?null:r.a.createElement("div",{className:n.type},n.message)},g=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)(""),l=Object(o.a)(u,2),i=l[0],m=l[1],g=Object(a.useState)(""),w=Object(o.a)(g,2),j=w[0],O=w[1],y=Object(a.useState)(""),S=Object(o.a)(y,2),k=S[0],C=S[1],I=Object(a.useState)(t),V=Object(o.a)(I,2),P=V[0],T=V[1],A=Object(a.useState)({message:null,type:null}),D=Object(o.a)(A,2),H=D[0],J=D[1];Object(a.useEffect)((function(){N()}),[]);var L,N=function(){f().then((function(e){c(e),T(e)}))},x=function(e,n){null!==L&&(L=null),J({message:e,type:n}),L=setTimeout((function(){J({message:null,type:null}),L=null}),5e3)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(p,{notification:H}),r.a.createElement(v,{value:k,eventHandler:function(e){return T(t.filter((function(n){return n.name.toLowerCase().includes(e.target.value.toLowerCase())}))),C(e.target.value)}}),r.a.createElement("h3",null,"Add a new"),r.a.createElement(h,{nameValue:i,nameEvent:function(e){return m(e.target.value)},numberValue:j,numberEvent:function(e){return O(e.target.value)},submitEvent:function(e){e.preventDefault();var n=t.filter((function(e){return e.name===i})),a={name:i,number:j},r=function(e){c(e),T(e),C(""),m(""),O("")};0!==n.length?window.confirm("".concat(a.name," is already added to phonebook, replace the old number with a new one?"))&&b(n[0].id,a).then((function(e){r(t.map((function(t){return t.id!==n[0].id?t:e}))),x("Changed number for ".concat(e.name," from ").concat(n[0].number," to ").concat(e.number),"success")})).catch((function(e){x("Information of ".concat(a.name," has already been removed from the server"),"error"),N()})):s(a).then((function(e){r(t.concat(e)),x("Added ".concat(e.name),"success")})).catch((function(e){x("".concat(e.response.data.error),"error")}))}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(E,{personsToShow:P,deletePerson:function(e){d(e.id).then((function(n){var a=t.filter((function(n){return n.id!==e.id}));c(a),T(a),x("Information of ".concat(e.name," successfully removed"),"success")})).catch((function(n){x("Information of ".concat(e.name," has already been removed from the server"),"error"),N()}))}}))};t(36);u.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.1c4a35ae.chunk.js.map