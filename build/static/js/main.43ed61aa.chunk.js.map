{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","personObject","post","id","delete","put","Filter","value","eventHandler","onChange","PersonForm","props","onSubmit","submitEvent","nameValue","nameEvent","numberValue","numberEvent","type","Persons","personsToShow","deletePerson","map","person","key","name","number","onClick","window","confirm","ShowNotification","notification","message","className","App","useState","persons","setPersons","newName","setNewName","newPhoneNumber","setNewPhoneNumber","filterValue","setFilterValue","setPersonsToShow","setNotification","useEffect","loadAllPersons","personsServices","returnedPersons","displayNotification","setTimeout","e","filter","toLowerCase","includes","target","preventDefault","duplicates","updateDisplay","newArray","length","returnedPerson","p","catch","error","concat","updatedPersons","n","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.43ed61aa.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst createPerson = (personObject) => {\r\n  const request = axios.post(baseUrl, personObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst updatePerson = (id, personObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, personObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, createPerson, deletePerson, updatePerson }","import React, { useState, useEffect } from 'react'\r\nimport personsServices from './services/persons'\r\n\r\nconst Filter = ({value, eventHandler}) => (\r\n  <div>\r\n    filter shown with <input\r\n      value={value}\r\n      onChange={eventHandler} />\r\n  </div>\r\n)\r\n\r\nconst PersonForm = (props) => (\r\n  <form onSubmit={props.submitEvent}>\r\n    <div>\r\n      name: <input\r\n        value={props.nameValue}\r\n        onChange={props.nameEvent}/>\r\n    </div>\r\n    <div>\r\n      number: <input\r\n        value={props.numberValue}\r\n        onChange={props.numberEvent}/>\r\n    </div>\r\n    <div>\r\n      <button type=\"submit\">add</button>\r\n    </div>\r\n  </form>\r\n)\r\n\r\nconst Persons = ({personsToShow, deletePerson}) => (\r\n  <>\r\n  {personsToShow.map(person =>\r\n    <div key={person.name}>\r\n      {person.name} {person.number}\r\n      <button onClick={() => {\r\n        if (window.confirm(`Delete ${person.name}?`))\r\n          return deletePerson(person)\r\n      }}>\r\n        delete\r\n      </button>\r\n    </div>)}\r\n  </>\r\n)\r\n\r\nconst ShowNotification = ({notification}) => {\r\n  if (notification.message===null) {\r\n    return null\r\n  }\r\n  \r\n  return (\r\n    <div className={notification.type}>\r\n      {notification.message}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons ] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newPhoneNumber, setNewPhoneNumber ] = useState('')\r\n  const [ filterValue, setFilterValue ] = useState('')\r\n  const [ personsToShow, setPersonsToShow ] = useState(persons)\r\n  const [ notification, setNotification ] = useState({\r\n    message: null,\r\n    type: null\r\n  })\r\n\r\n  useEffect(() => {\r\n    loadAllPersons()\r\n  }, [])\r\n  \r\n  const loadAllPersons = () => {\r\n    personsServices\r\n      .getAll()\r\n      .then(returnedPersons => {\r\n        setPersons(returnedPersons)\r\n        setPersonsToShow(returnedPersons)\r\n      })\r\n  }\r\n  \r\n  const displayNotification = (message, type) => {\r\n    setNotification({\r\n      message: message,\r\n      type: type\r\n    })\r\n    setTimeout(() => {\r\n      setNotification({\r\n        message: null,\r\n        type: null\r\n      })\r\n    }, 5000)\r\n  }\r\n\r\n  const addPerson = (e) => {\r\n    e.preventDefault()\r\n\r\n    const duplicates = persons.filter(person => person.name === newName)\r\n    const personObject = {\r\n      name: newName,\r\n      number: newPhoneNumber\r\n    }\r\n    const updateDisplay = (newArray) => {\r\n      setPersons(newArray)\r\n      setPersonsToShow(newArray)\r\n      setFilterValue('')\r\n      setNewName('')\r\n      setNewPhoneNumber('')\r\n    }\r\n\r\n    if (duplicates.length !== 0){\r\n      if (window.confirm(`${personObject.name} is already added to phonebook, replace the old number with a new one?`)){\r\n        personsServices\r\n          .updatePerson(duplicates[0].id, personObject)\r\n          .then(returnedPerson => {\r\n            updateDisplay(persons.map(p => p.id !== duplicates[0].id ? p : returnedPerson))\r\n            displayNotification(`Changed number for ${returnedPerson.name} from ${duplicates[0].number} to ${returnedPerson.number}`, 'success')\r\n          })\r\n          .catch(error => {\r\n            displayNotification(`Information of ${personObject.name} has already been removed from the server`, 'error')\r\n            loadAllPersons()\r\n          })    \r\n      }\r\n    }\r\n    else {\r\n      personsServices\r\n        .createPerson(personObject)\r\n        .then(returnedPerson => {\r\n          updateDisplay(persons.concat(returnedPerson))\r\n          displayNotification(`Added ${returnedPerson.name}`, 'success')\r\n        })\r\n      }\r\n  }\r\n\r\n  const deletePerson = (person) => {\r\n    personsServices\r\n      .deletePerson(person.id)\r\n      .then(returnedPerson => {\r\n        const updatedPersons = persons.filter(n => n.id !== person.id)\r\n        setPersons(updatedPersons)\r\n        setPersonsToShow(updatedPersons)\r\n      })\r\n      .catch(error => {\r\n        displayNotification(`Information of ${person.name} has already been removed from the server`, 'error')\r\n        loadAllPersons()\r\n      })\r\n  }\r\n\r\n  const newNameEvent = (e) => setNewName(e.target.value)\r\n  const newPhoneNumberEvent = (e) => setNewPhoneNumber(e.target.value)\r\n\r\n  const filterPersons = (e) => {\r\n    setPersonsToShow(persons.filter(person => person.name\r\n      .toLowerCase()\r\n      .includes(e.target.value.toLowerCase()))\r\n    )\r\n    return setFilterValue(e.target.value)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n        <ShowNotification notification={notification} />\r\n        <Filter value={filterValue} eventHandler={filterPersons} />\r\n      <h3>Add a new</h3>\r\n        <PersonForm\r\n          nameValue={newName} \r\n          nameEvent={newNameEvent} \r\n          numberValue={newPhoneNumber} \r\n          numberEvent={newPhoneNumberEvent} \r\n          submitEvent={addPerson}\r\n        />\r\n      <h3>Numbers</h3>\r\n        <Persons\r\n          personsToShow={personsToShow}\r\n          deletePerson={deletePerson}\r\n        />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './index.css'\r\n\r\nReactDOM.render(\r\n    <App />,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}